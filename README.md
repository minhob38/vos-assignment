# ê³µê°„ì˜ ê°€ì¹˜ ë°±ì—”ë“œ ê³¼ì œ
## ðŸ”Ž ê°œìš”
**ì„œìš¸ì‹œ êµ¬ë³„ ê³µì‹œì§€ê°€ ìˆœìœ„**ë¥¼ ì¡°íšŒí•˜ëŠ” API ì„œë²„ìž…ë‹ˆë‹¤. ì•„ëž˜ URIë¥¼ í†µí•´ í•´ë‹¹ ì§€ì—­ì˜ **ìƒìœ„ 20ê°œ (ê³µì‹œì§€ê°€ ë‚´ë¦¼ì°¨ìˆœ, pnu ì˜¬ë¦¼ì°¨ìˆœ)** í•­ëª©ì„ ì¡°íšŒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  
`http://localhost:3000/api/land-value?area-code={ì‹œêµ°êµ¬ì½”ë“œ}&base-year={ê¸°ì¤€ì—°ë„}&base-month={ê¸°ì¤€ì›”}`

âš ï¸ ê³µì‹œì§€ê°€ ìˆœìœ„ë¥¼ ê³„ì‚°í•  ë•Œ, ê¸°ì¤€ì€ 2020ë…„ 1ì›”ìž…ë‹ˆë‹¤. ë”°ë¼ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ Query Stringì„ `base-year=2020&base-month=01`ë¡œ ìš”ì²­í•´ì•¼í•©ë‹ˆë‹¤. ë§Œì¼ ì•„ë‹ˆë¼ë©´ ì„œë²„ëŠ” **400(Bad Request) ìƒíƒœì½”ë“œ**ë¥¼ ì‘ë‹µí•©ë‹ˆë‹¤.

## ðŸ“ ì„¤ì¹˜ ë° ì‹¤í–‰
### ì„¤ì¹˜
```
git clone https://github.com/minhob38/vos-assignment.git
cd vos-assignment
npm install
```

### ì„œë²„ ì‹¤í–‰
ì„œë²„ëŠ” localhost 3000 í¬íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
```
npm start
```

### ì„œë²„ í…ŒìŠ¤íŠ¸
```
npm test
```

## ðŸ‘·ðŸ» Stack
### koa (express ì°¨ì´)
### postgreSQL (MongoDB ì°¨ì´)
### sequelize
sequelizeëŠ” nodejs ORM(Object Relational Mapping)ìœ¼ë¡œ, databaseë¥¼ javascript ê°ì²´ì²˜ëŸ¼ ë‹¤ë£° ìˆ˜ ìžˆê²Œ í•´ì¤ë‹ˆë‹¤. ë˜í•œ sequelizeê°€ javascript queryë¬¸ì„ ìž‘ì„±í•˜ë©´, SQLë¬¸ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ databaseë¥¼ ë‹¤ë£¨ê¸° ë•Œë¬¸ì— SQL ì½”ë“œë¥¼ ìž‘ì„±í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. ì´ì²˜ëŸ¼ **sequelizeê°€ javascript ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì— ì§‘ì¤‘í•´ì¤„ ìˆ˜ ìžˆë„ë¡ í•´ì£¼ê¸° ë•Œë¬¸ì—, sequelizeë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.**  
ì•„ëž˜ëŠ” sequelize queryì™€ SQL queryì˜ ì°¨ì´ìž…ë‹ˆë‹¤.
||Sequelize|SQL|
|:-|:-|:-|
|**ìƒì„±**|`User.create({ name: "doe", age: 20 })`|`INSERT INTO users (name, age) VALUES("doe", 20)`|
|**ì¡°íšŒ**|`User.findAll({ where: { name: "doe" } })`|`SELECT * FROM users WHERE name = "doe"`|
|**ìˆ˜ì •**|`User.update({ age: 30, where: { name: "doe" } })`|`SELECT users SET age = 30 WHERE name = "doe"`|
|**ì‚­ì œ**|`User.destroy({ where: { name: "doe" } })`|`DELETE FROM users WHERE name = "doe"`|

### csv-parser
csv-parserëŠ” stream ê¸°ë°˜ìœ¼ë¡œ csvë¥¼ ì½ê¸°ì— íŒŒì¼ í¬ê¸°ì™€ ê´€ê³„ ì—†ì´ parsing í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë˜í•œ, í–‰ë³„ë¡œ ì½ì€ ê²°ê³¼ë¥¼ csv í—¤ë”ê°€ keyì¸ ê°ì²´ë¡œ ë°˜í™˜í•˜ì—¬ ê²°ê³¼ë¥¼ ë‹¤ë£¨ê¸° ì‰½ìŠµë‹ˆë‹¤. ì´ì²˜ëŸ¼ csvë¥¼ ë‹¤ë£¨ê¸°ì— ì¢‹ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê¸°ì—, **ì„œìš¸íŠ¹ë³„ì‹œ ê°œë³„ê³µì‹œì§€ê°€ì •ë³´ csvë¥¼ parsing í•˜ê¸° ìœ„í•´ì„œ csv-parserë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.**

### event-stream
ì„œìš¸íŠ¹ë³„ì‹œ ê°œë³„ê³µì‹œì§€ê°€ì •ë³´ëŠ” 29,397,090ê°œë¡œ nodejsì—ì„œ ì´ ë°ì´í„°ë¥¼ ì €ìž¥í•œë‹¤ë©´ ë©”ëª¨ë¦¬ë¶€ì¡±ìœ¼ë¡œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê¸°ì—, í•œë²ˆì— ì´ ë°ì´í„°ë“¤ì„ Databaseì— ì‚½ìž…í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ë”°ë¼ì„œ streamì„ ëŠì–´ì„œ Databaseì— ì €ìž¥í•  í•„ìš”ê°€ ìžˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ streamì— ëŒ€í•œ ì´ë²¤íŠ¸ëŠ” ë¹„ë™ê¸°ë¡œ ë°œìƒí•˜ê¸°ì— ì´ë¥¼ ë™ê¸°ì½”ë“œì²˜ëŸ¼ ë‹¤ë£¨ê¸°ì—ëŠ” ì–´ë ¤ì›€ì´ ìžˆìŠµë‹ˆë‹¤. event-streamì€ streamì„ ë©”ëª¨ë¦¬ê°€ ì•„ë‹Œ ì‹œê°„ì— ëŒ€í•œ ë°°ì—´ì²˜ëŸ¼ ë‹¤ë£¨ì–´, streamì„ ì¤‘ê°„ì— ë©ˆì¶”ê³  í•„ìš”í•œ ìž‘ì—…ì„ í•œë’¤ ë‹¤ì‹œ streamì„ ìž¬ê°œí•  ìˆ˜ ìžˆê²Œ í•´ì¤ë‹ˆë‹¤. **ì´ì²˜ëŸ¼ stream ì¤‘ê°„ìž‘ì—… ì œì–´ë¥¼ ìœ„í•´ event-streamì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.**

### super-test
http ìš”ì²­ì„ í…ŒìŠ¤íŠ¸ í•˜ê¸° ìœ„í•´, ì„œë²„ë¥¼ ì—´ê³  ìš”ì²­ì„ ë³´ë‚¸ í›„ ì‘ë‹µì„ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤. **super-testëŠ” ì´ëŸ¬í•œ ê³¼ì •ì„ í•´ì£¼ê¸°ì— API ì„œë²„ì˜ endpointë¥¼ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.** super-testë¥¼ í†µí•´ ë°›ì€ API ì„œë²„ì˜ ì‘ë‹µ ê²°ê³¼ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•´ **mochaì˜ test í•¨ìˆ˜ì™€ chaiì˜ assertion í•¨ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ë‹µê²°ê³¼ì™€ ê¸°ëŒ€ê°’ì„ ë¹„êµí•˜ì˜€ìŠµë‹ˆë‹¤.**

### mocha / chai
MochaëŠ” nodejsì—ì„œ ì‹¤í–‰ë˜ëŠ” javascript test frameworkì´ë©° chaiëŠ” í•¨ê»˜ ì‚¬ìš©ë˜ëŠ” assertion libraryìž…ë‹ˆë‹¤. **mochaì™€ chaië¥¼ í†µí•´, util í•¨ìˆ˜ê°€ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ìž‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤.**

### google clould sql
ìž‘ì—… ì»´í“¨í„°ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œë„ íŽ¸ë¦¬í•˜ê²Œ Databaseì— ì ‘ê·¼í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ”, Databaseë¥¼ ë¡œì»¬í™˜ê²½ì´ ì•„ë‹Œ í´ë¼ìš°ë“œ í™˜ê²½ì— ì˜¬ë¦´ í•„ìš”ê°€ ìžˆìŠµë‹ˆë‹¤. google clould sqlì€ MySQL, PostgreSQL Databaseë¥¼ í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ê´€ë¦¬í•´ì¤ë‹ˆë‹¤. **ì´ëŸ¬í•œ í´ë¼ìš°ë“œë¥¼ í†µí•´ í™˜ê²½ì— ê´€ê³„ ì—†ì´ databaseì— ì ‘ê·¼í•  ìˆ˜ ìžˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.**


## Lesson
### Indexingì— ì˜í•œ Database ì¡°íšŒ ì†ë„ ì°¨ì´
Databaseì— ì¸ë±ì‹±ì´ ìžˆì„ ë•Œì™€ ì—†ì„ ë•Œì˜ ì¡°íšŒ ì†ë„ë¥¼ ë¹„êµí•´ë³´ì•˜ìŠµë‹ˆë‹¤.
|ì¸ë±ì‹± ì—†ëŠ” DB|ì¸ë±ì‹± ìžˆëŠ” DB|
|:-|:-|
|6498ms|2376ms|

### ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬
stream (ì •ì§€) -> db ì €ìž¥ -> stream (ìž¬ê°œ)